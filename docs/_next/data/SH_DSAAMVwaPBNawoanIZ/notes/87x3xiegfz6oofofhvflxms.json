{"pageProps":{"note":{"id":"87x3xiegfz6oofofhvflxms","title":"Prometheus","desc":"","updated":1670220161406,"created":1670214321497,"custom":{},"fname":"til.prometheus","type":"note","vault":{"fsPath":"vault"},"contentHash":"b912ffe8e56159da580b7e8d0cd1f9fa","links":[],"anchors":{"apa-itu-prometheus":{"type":"header","text":"Apa itu Prometheus","value":"apa-itu-prometheus","line":8,"column":0,"depth":2},"cara-kerja-prometheus":{"type":"header","text":"Cara kerja prometheus","value":"cara-kerja-prometheus","line":10,"column":0,"depth":3},"apa-itu-promql":{"type":"header","text":"Apa itu PromQL","value":"apa-itu-promql","line":12,"column":0,"depth":2},"apa-itu-time-series-data":{"type":"header","text":"Apa itu time-series data","value":"apa-itu-time-series-data","line":18,"column":0,"depth":3},"selectors":{"type":"header","text":"Selectors","value":"selectors","line":35,"column":0,"depth":3},"select-metric":{"type":"header","text":"Select Metric","value":"select-metric","line":39,"column":0,"depth":4},"filter-by-label":{"type":"header","text":"Filter by Label","value":"filter-by-label","line":41,"column":0,"depth":4},"select-to-return-range-vectors":{"type":"header","text":"Select to return range vectors","value":"select-to-return-range-vectors","line":55,"column":0,"depth":4},"select-pasthistorical-data":{"type":"header","text":"Select past/historical data","value":"select-pasthistorical-data","line":68,"column":0,"depth":4}},"children":[],"parent":"tvdcga33h6hi7fxd9cwqd66","data":{}},"body":"<h1 id=\"prometheus\">Prometheus<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#prometheus\"></a></h1>\n<h2 id=\"apa-itu-prometheus\">Apa itu Prometheus<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#apa-itu-prometheus\"></a></h2>\n<h3 id=\"cara-kerja-prometheus\">Cara kerja prometheus<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#cara-kerja-prometheus\"></a></h3>\n<h2 id=\"apa-itu-promql\">Apa itu PromQL<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#apa-itu-promql\"></a></h2>\n<p>PromQL(Prometheus Query Language) adalah functional query yang disediakan oleh prometheus agar user dapat melakukan query ke data yang telah disimpan secara real-time dan melakukan segala macam analisis, aggregation dan operasi.</p>\n<p>Untuk memahami promql ada baiknya kita mengetahui dulu tipe data yang disimpan, yaitu time-series data.</p>\n<h3 id=\"apa-itu-time-series-data\">Apa itu time-series data<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#apa-itu-time-series-data\"></a></h3>\n<p>Time-series data didefinisikan sebagai seraikaian data yang diurutkan berdasarkan waktu.\nMisalnya, Kalau lo mau mengukur penggunaan CPU, data yang akan dikumpulkan akan seperti ini.</p>\n<div class=\"table-responsive\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Timestamp</th><th>CPU Utilization (%)</th></tr></thead><tbody><tr><td>1591709873808</td><td>67</td></tr><tr><td>1591709884270</td><td>68</td></tr></tbody></table></div>\n<p>Di Prometheus, time-series object dibuat pada setiap metrik yang mau dimonitor dan setiap object itu unik diidentifikasi dengan nama metric yang berisi key-value.\nYang mana key berisi timestamp dan value adalah nilai yang mau diukur. Setiap key-value disebut dengan istilah \"Sample\".\nSelain itu prometheus membrikan kemampuan untuk menambahkan label untuk memperkaya data atribut pada metrics.\nMisalnya, Kalau lo mau mengukur berapa banyak request pada suatu endpoint, lo bisa membuat satu metrics <code>http_request_duration_seconds_count</code>.\nlalu lo tambahkan label untuk memperinci diendpoint mana, jadi <code>http_request_duration_seconds_count{job=\"order-service\", path=\"POST_/dispatch\"}</code>.\nDengan memperkaya data, lo bisa dengan mudah melakukan filter ketika melakukan monitoring aplikasi lo.</p>\n<h3 id=\"selectors\">Selectors<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#selectors\"></a></h3>\n<p>Ada beberapa cara untuk melakukan selecting data. </p>\n<h4 id=\"select-metric\">Select Metric<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#select-metric\"></a></h4>\n<h4 id=\"filter-by-label\">Filter by Label<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#filter-by-label\"></a></h4>\n<p>Setelah selecting metrics kita bisa melakukan filter berdasarkan label, ada beberapa operator dasar yang bisa kita gunakan</p>\n<div class=\"table-responsive\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Description</th><th>example</th></tr></thead><tbody><tr><td>ambil data dengan value \"heap\"</td><td>jvm_memory_bytes_used {area=\"heap\"}</td></tr><tr><td>ambil data dengan value tidak sama dengan \"heap\"</td><td>jvm_memory_bytes_used {area!=\"heap\"}</td></tr><tr><td>cari data pada label job dengan value berisi 'fed'</td><td>jvm_memory_bytes_used {job=~\"fed.+\"}</td></tr><tr><td>cari selain data pada label job dengan value berisi 'fed'</td><td>jvm_memory_bytes_used {job!~\"fed.+\"}</td></tr><tr><td>cari data pada label job dengan value berisi awalan 'f' atau 'j'</td><td>jvm_memory_bytes_used {job=~\"f.+|j.+\"}</td></tr><tr><td>cari data pada label area dengan value berisi 'heap' atau 'nonheap'</td><td>jvm_memory_bytes_used {area=~\"heap|nonheap\"}</td></tr><tr><td>cari data pada label area dengan value berisi 'heap' atau 'nonheap' dan pada label job dengan awalan huruf 'j'</td><td>jvm_memory_bytes_used {area=~\"heap|nonheap\", job=~'j.+'}</td></tr></tbody></table></div>\n<h4 id=\"select-to-return-range-vectors\">Select to return range vectors<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#select-to-return-range-vectors\"></a></h4>\n<p>Selain dasar query tersebut, lo juga bisa mengembalikan nilai sample untuk setiap time series yang bebeda.\nlo bisa menambahkan '[10m]' diakhir label, misalnya jvm_memory_bytes_used {area=\"heap\"}[10m] artinya kita akan mengambil data dari query dalam rentang waktu 10 menit.\nselain menit kita juga bisa </p>\n<ul>\n<li>s: seconds</li>\n<li>m: minutes</li>\n<li>h: hours</li>\n<li>d: days</li>\n<li>w: weeks</li>\n<li>y: years</li>\n</ul>\n<h4 id=\"select-pasthistorical-data\">Select past/historical data<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#select-pasthistorical-data\"></a></h4>\n<p>Kalau sebelumnya kita bisa mengambil data berdasarkan range, kita bisa juga melakukan mengambil data yang sudah lalu. misal</p>\n<p><code>jvm_memory_bytes_used Offset 7d</code></p>","noteIndex":{"id":"oqxmejlafk9x8rj9t5hya5z","title":"Hi ðŸ‘‹","desc":"","updated":1721116613997,"created":1646842475821,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"64c62caa2f0c02c2d68a5a2d826cc01e","links":[],"anchors":{"welcome-to-sotoy":{"type":"header","text":"Welcome to Sotoy","value":"welcome-to-sotoy","line":8,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":12,"column":0,"depth":2}},"children":["spfwom01chbihki1twghclf","bsv930j2j6qlih60c7eu7wh","ohf85tu5nw2b8ewx6cetsmp","u3lhhpriar8wgcjw8svapha","tvdcga33h6hi7fxd9cwqd66","t58wEmhAtf1GlHmO","0k6vv27sjk0g7lopt9y5qns","91eqybfohputr1iaxqbsbfe","xfsiepyapo4o9u17mvwwmmz","7udjlx2925dhyxgkrntgcbz","x1aw4xgjnlqqzeww7dkz75g","tn8d44344iskkn1a89nz9rr","hbkfeuaa1d81j6s6v9hba70","i7mm47rth9gnn28skh9jdtn","lqlae5nmghava9hvlew3b38","ntlsbdyqla0mqoqn26t7jj3"],"parent":null,"data":{},"body":"\n# Welcome to Sotoy\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.83.0","vaults":[{"fsPath":"vault"},{"fsPath":"templates","seed":"dendron.templates","name":"dendron.templates","visibility":"private"},{"fsPath":"vault2","name":"vault-private","sync":"sync","visibility":"private","remote":{"type":"git","url":"git@github.com:zeihanaulia/journal.git"}}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"seeds":{"dendron.templates":{}},"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":true,"siteRootDir":"docs","seo":{"title":"Sotoy","description":"Personal knowledge space about anything I learn. Notes, knowledge, and ideas from me.","author":"Zeihan Aulia","twitter":"zeihanaulia","image":{"url":"https://pbs.twimg.com/profile_images/502375255256485888/1UYtt7PT_400x400.jpeg","alt":"Software Engineer, "}},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","assetsPrefix":"/sotoy","siteUrl":"https://zeihanaulia.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault-private","vault","dendron.templates"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}